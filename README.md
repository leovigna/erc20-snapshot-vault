# Solidity Starter Project

Solidity starter project.

## Getting Started

### Installing

Save storage with [pnpm](https://pnpm.js.org/). You can also use regular NPM or Yarn.

```
pnpm install
```

### Directory Structure

```
lib
├── abi # abi output from src/
|
├── ethers # ethers contract abstractions codegenned from abis only (no bytecode)
│
├── solidity # the contracts themselves, in .sol form
│
├── truffle  # truffle contract abstractions codegenned from abis + bytecode
|
└── web3  # web3 contract abstractions codegenned from abis + bytecode
```

### Usage

These smart contracts can be imported as a dependency in various ways described below.

#### Solidity

The solidity smart contracts themselves can simply be imported via the `solidity` directory of `@leovigna/solidity-starter`.

```solidity
import "@leovigna/solidity-starter/solidity/Example.sol";
```

#### Artifacts

JSON artifacts generated by sol-compiler are available under the abi directory.

```typescript
import ExampleArtifact from '@leovigna/solidity-starter/abi/Example.json';
```

#### Ethers

This library ships with `ethers` contract factory abstractions generated by typechain. To use these, make sure you have `ethers` installed as a dependency:

```
pnpm install ethers --save
```

You can then create an ethers contract as follows:

```typescript
import ExampleEthers from '@leovigna/solidity-starter/ethers/Example';
const example = ExampleEthers.attach(deployed.address).connect(
    new ethers.providers.JsonRpcProvider('http://localhost:8545'),
);
```

This gives a fully typed (if using TypeScript) version of a ethers contract factory. See the ethers documentation on usage.

#### Truffle

This library ships with `@truffle/contract` abstractions of each of our smart contracts. To use these, make sure you have `@truffle/contract` as a dependency.

```
pnpm install @truffle/contract --save
```

You can then create an truffle contract as follows:

```typescript
import ExampleTruffle from '@leovigna/solidity-starter/truffle/Example';
const example = await ExampleTruffle.new();
```

This gives a fully typed (if using TypeScript) version of a truffle contract. See the truffle documentation on usage.

#### Web3

This library ships with `web3-eth-contract` abstractions of each of our smart contracts. To use these, make sure you have `web3` and `web3-eth-contract` as a dependency.

```
pnpm install web3 web3-eth-contract --save
```

You can then create an web3 contract as follows:

```typescript
import ExampleWeb3 from '@leovigna/solidity-starter/web3/Example';
const example = ExampleWeb3(web3);
```

This gives a fully typed (if using TypeScript) version of a web3 contract. See the web3 documentation on usage.

### Cloning

To clone this starter repo and add it as an upstream folow below:

```
git clone https://github.com/leovigna/solidity-starter.git myproject
cd myproject
git remote set-url origin git@github.com/leovigna/myproject.git
git remote add upstream https://github.com/leovigna/solidity-starter.git
git push origin master
git push --all
```

Then to sync any new changes form this repo to the new repo follow these [instructions](https://help.github.com/en/articles/syncing-a-fork).

```
git fetch upstream
git checkout master
git merge upstream/master
```

### Testing

```
npm run test
```

### Codestyle

```
npm run lint
```

## Contributing

To contribute code, feel free to fork this repo.

## License

2021 Leo Vigna
MIT License.
